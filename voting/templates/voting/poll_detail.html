{% extends "home/base.html" %}
{% block content %}
<h2>{{ poll.title }}</h2>
<p>{{ poll.description }}</p>

{% if user.is_superuser %}
{% for question in poll.questions.all %}
    <div class="card mt-3">
        <div class="card-header">
            <h5>{{ question.text }}</h5>
        </div>
        <div class="card-body">
            {% if question.responses.all %}
                <ul class="list-group">
                    {% for response in question.responses.all %}
                        <li class="list-group-item">
                            <strong>{{ response.student.username }}:</strong> {{ response.choice.text }}
                        </li>
                    {% endfor %}
                </ul>
            {% else %}
                <p>Поки що немає відповідей.</p>
            {% endif %}
        </div>
    </div>
{% endfor %}

<a href="{% url 'voting:poll_list' %}" class="btn btn-secondary mt-3">← Назад до списку</a>
{% else %}
<form method="post" action="{% url 'voting:vote' poll.id %}">
    {% csrf_token %}
    {% for question in poll.questions.all %}
        <h3>{{ question.text }}</h3>
        {% for choice in question.choices.all %}
            <label>
                <input type="radio" name="question-{{ question.id }}" value="{{ choice.id }}">
                {{ choice.text }}
            </label><br>
        {% endfor %}
    {% endfor %}
    <button type="submit">Проголосувати</button>
</form>
{% endif %}
{% endblock %}
